{% load static %}
<!doctype html>
<html class="h-100" lang="en-US">
	<title>
		The Great Avocado War of '24
	</title>
	<body class="d-flex flex-column h-100">
		<head>
			<link href='{% static "ft_transcendence.css" %}' rel="stylesheet" />
			<link href='{% static "bootstrap/css/bootstrap.css" %}' rel="stylesheet">
			<link rel="shorcut icon" href="#">
			<script src='{% static "popper/popper.min.js" %}'>
			</script>
			<script src='{% static "bootstrap/js/bootstrap.js" %}'>
			</script>
			<script type="importmap">
			{
				"imports":
				{
					"three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
					"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
				}
			}
			</script>
			{% csrf_token %}
		</head>
		<nav class="bg-body-tertiary border-bottom navbar navbar-expand-lg py-0 shadow-sm">
			<div class="container-fluid px-0">
				<ul class="flex-row me-auto navbar-nav">
					<li class="border d-flex nav-item py-1 rounded text-nowrap" data-bs-target="#about" data-bs-toggle="modal" id="about-button" title="About">
						<img height="22" src='{% static "img/22/help-about.svg" %}'>
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="about-label">
							About
						</a>
					</li>
					<li class="dropdown">
						<button aria-expanded="false" class="bg-body-tertiary border d-flex nav-item py-1 rounded text-nowrap" data-bs-toggle="dropdown" id="language-button" title="Language">
							<img height="22" src='{% static "img/22/preferences-desktop-locale.svg" %}'>
							<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="language-label">
								Language
							</a>
							<img class="ms-1 my-auto" height="16" src='{% static "img/16/go-down.svg" %}'>
						</button>
						<ul class="border dropdown-menu frame position-absolute rounded" id="language-select" style="padding: 3px !important;">
							<label class="d-flex form-check m-0 p-0 rounded" for="english">
								<input checked id="english" name="language" type="radio">
								<label class="form-check-label" for="english">
									English
								</label>
							</label>
							<label class="d-flex form-check m-0 p-0 rounded" for="french">
								<input id="french" name="language" type="radio">
								<label class="form-check-label" for="french">
									Français
								</label>
							</label>
							<label class="d-flex form-check m-0 p-0 rounded" for="ukrainian">
								<input id="ukrainian" name="language" type="radio">
								<label class="form-check-label" for="ukrainian">
									Українська
								</label>
							</label>
						</ul>
					</li>
					<li class="border d-flex nav-item py-1 rounded text-nowrap" id="pause" title="Pause">
						<img height="22" src='{% static "img/22/media-playback-pause.svg" %}'>
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0">
							Pause
						</a>
					</li>
					<li class="border d-none nav-item py-1 rounded text-nowrap" id="play" title="Play">
						<img height="22" src='{% static "img/22/media-playback-start.svg" %}'>
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="play-label">
							Play
						</a>
					</li>
					<li class="border d-flex nav-item py-1 rounded text-nowrap" id="tournament-button" title="Tournament">
						<img height="22" src='{% static "img/22/view-list-tree.svg" %}'>
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="tournament-label">
							Tournament
						</a>
					</li>
				</ul>
				<ul class="navbar-nav">
					<li class="border d-flex nav-item py-1 rounded text-nowrap" data-bs-target="#login" data-bs-toggle="modal" id="login-button" title="Log in">
						<img height="22" src='{% static "img/22/network-connect.svg" %}'>
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="login-label">
							Log in
						</a>
					</li>
					<li class="dropdown d-none" id="profile-button">
						<button aria-expanded="false" class="bg-body-tertiary border d-flex nav-item py-1 rounded text-nowrap" data-bs-auto-close="outside" data-bs-toggle="dropdown" title="Profile">
							<img class="rounded-circle" height="22" id="profile-avatar-mini" src='{% static "img/22/im-user.svg" %}'>
							<a aria-current="page" class="active ms-1 my-auto nav-link p-0" id="profile-name">
							</a>
							<img class="ms-1 my-auto" height="16" src='{% static "img/16/go-down.svg" %}'>
						</button>
						<ul class="border dropdown-menu dropdown-menu-end frame p-0 position-absolute rounded">
							<div class="carousel slide" id="profile">
								<div class="carousel-inner">
									<div class="active carousel-item p-2">
										<div class="position-relative">
											<img class="mx-auto mw-100 rounded-circle" id="profile-avatar" src="{{ user.get_image_profile_url }}">
											<label class="border button d-none position-absolute end-0 rounded shadow-sm top-0" for="avatar" type="submit">
												<img class="m-1" height="22" src='{% static "img/22/document-edit.svg" %}'>
											</label>
										</div>
										<div class="position-relative" id="profile-name-container">
											<h3 class="mx-auto my-0 pe-none" id="profile-name-inside">
											</h3>
											<div class="d-flex d-none" id="profile-name-input-container">
												<input class="border me-1 p-1 rounded w-100" id="profile-name-input" type="text">
												<label class="border button ms-1 rounded shadow-sm" id="profile-name-input-button">
													<img class="m-1" height="22" src="img/22/dialog-ok-apply.svg">
												</label>
											</div>
											<label class="border button d-none position-absolute end-0 rounded shadow-sm top-0" id="profile-name-edit">
												<img class="m-1" height="22" src="img/22/document-edit.svg">
											</label>
										</div>
										<progress class="border-0 rounded w-100" id="profile-bar" max="100" value="50">
										</progress>
										<div class="d-flex">
											<div class="pe-none m-1" id="profile-wins">
												0 Wins
											</div>
											<div class="me-1 ms-auto my-1 pe-none" id="profile-losses">
												0 Losses
											</div>
										</div>
										<button class="border button d-flex m-1 ms-auto rounded shadow-sm w-100" data-bs-slide-to="1" data-bs-target="#profile" type="button">
											<img class="m-1 ms-auto" height="22" src="img/22/appointment-new.svg">
											<div class="me-auto my-auto text-nowrap" id="profile-history">
												Match History
											</div>
											<img class="ms-1 my-auto" height="16" src="img/16/go-next.svg">
										</button>
										<div class="d-flex mx-auto my-1 pe-none" id="profile-friends-count">
											Friends: 0
										</div>
										<button class="border button d-flex m-1 ms-auto rounded shadow-sm w-100" data-bs-slide-to="2" data-bs-target="#profile" type="button">
											<img class="m-1 ms-auto" height="22" src="img/22/address-book-new.svg">
											<div class="me-auto my-auto text-nowrap" id="profile-friends">
												Manage Friends
											</div>
											<img class="ms-1 my-auto" height="16" src="img/16/go-next.svg">
										</button>
										<button class="border button d-flex m-1 ms-auto rounded shadow-sm w-100" id="profile-logout" type="button">
											<img class="m-1 ms-auto" height="22" src="img/22/system-log-out.svg">
											<div class="me-auto my-auto text-nowrap" id="profile-logout-label">
												Log out
											</div>
										</button>
										<button class="border button d-flex m-1 ms-auto rounded shadow-sm w-100" id="profile-delete" type="button">
											<img class="m-1 ms-auto" height="22" src="img/22/edit-delete.svg">
											<div class="me-auto my-auto text-nowrap" id="profile-delete-label">
												Delete Account
											</div>
										</button>
									</div>
									<div class="carousel-item">
										<div class="bg-body-tertiary border-bottom d-flex p-2">
											<button class="border borderless-button d-flex mx-1 my-auto p-0 rounded" data-bs-slide-to="0" data-bs-target="#profile" type="button">
												<img class="m-1" height="22" src="img/22/go-previous.svg">
											</button>
											<h3 class="m-auto pe-none text-nowrap" id="profile-history-name">
												Match History
											</h3>
										</div>
										<table class="overflow-y-auto pe-3 w-100" style="max-height: calc(100vh - 102px);">
											<thead>
												<tr>
													<th id="profile-history-time" scope="col">
														Time
													</th>
													<th id="profile-history-result" scope="col">
														Result
													</th>
													<th scope="col">
														Type
													</th>
													<th scope="col">
														Score
													</th>
													<th id="profile-history-opponent" scope="col">
														Opponent
													</th>
												</tr>
											</thead>
											<tbody id="profile-log">
											</tbody>
										</table>
									</div>
									<div class="carousel-item" style="width: max-content;">
										<div class="bg-body-tertiary border-bottom d-flex p-2">
											<button class="border borderless-button d-flex mx-1 my-auto p-0 rounded" data-bs-slide-to="0" data-bs-target="#profile" type="button">
												<img class="m-1" height="22" src="img/22/go-previous.svg">
											</button>
											<h3 class="m-auto pe-none text-nowrap" id="profile-friends-name">
												Friends
											</h3>
										</div>
										<div class="d-flex overflow-hidden p-0 warning-banner" id="profile-banner" style="max-height: 0;">
											<div class="m-auto pe-none text-nowrap" id="profile-banner-text">
											</div>
											<button class="border borderless-button d-flex p-0 rounded" id="profile-banner-close" type="button">
												<img class="m-1" height="22" src="img/22/window-close.svg">
											</button>
										</div>
										<div class="overflow-y-auto over pe-2" style="min-width: min-content;" tabindex="-1">
											<div class="m-2 pe-2 w-100" style="min-width: min-content;">
												<div class= "d-flex">
													<input class="border m-1 p-1 rounded w-100" id="profile-list-item" placeholder="Enter username" type="text">
													<button class="border button d-flex m-1 rounded shadow-sm" id="profile-list-add">
														<img class="m-1" height="22" src="img/22/list-add.svg">
													</button>
												</div>
												<div id="profile-list" style="min-width: min-content;">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</ul>
					</li>
					<li class="border d-flex nav-item py-1 rounded text-nowrap" 
					{% if not user.is_authenticated %}
						data-bs-target="#login" 
					{% else %}
						data-bs-target="#logout"
					{% endif %}
					data-bs-toggle="modal" title="Log in">

						{% if not user.is_authenticated %}
							<img class="icon" height="22" src='{% static "../static/icons/im-user.svg" %}'>
						{% else %}
								<img src="{{ user.get_image_profile_url }}" class="rounded-circle" alt="profile picture" width="30" height="30">
						{% endif %}
						
						<a aria-current="page" class="active ms-1 my-auto nav-link p-0">
							{% if not user.is_authenticated %}
							Log in
							{% else %}
								{{ user.username }}
							{% endif %}
						</a>
					</li>
				</ul>
			</div>
		</nav>

		{% comment %} Profile page {% endcomment %}
		{% if user.is_authenticated %}
		<div>
			<p> User: {{ user.username }} </p>
			<p>Date Joined : {{ user.date_joined }}</p>
			<img src="{{ user.get_image_profile_url }}" alt="profile picture" width="100" height="100">

			<form action="/upload_image" method="post" enctype="multipart/form-data">
				{% csrf_token %}
				<label for="imageFile">Sélectionnez une image :</label><br>
				<input type="file" id="imageFile" name="imageFile"><br><br>
				<input type="submit" value="Envoyer">
			</form>

			<h4>Friend request</h4>
			{% for friend in friend_requests %}
				<li>
					<img src="{{ friend.get_image_profile_url }}" class="rounded-circle" alt="profile picture" width="30" height="30">
					{{ friend.username }} (waiting to accept...)
				</li>
			{% endfor %}

			{% for friend in friend_requesters %}
				<li>
					<img src="{{ friend.get_image_profile_url }}" class="rounded-circle" alt="profile picture" width="30" height="30">
					{{ friend.username }}

					<button type="submit" id="acceptButton" onclick="accept_friend_request('{{ friend.username }}')">
						<img src='{% static "../static/icons/green_check_mark.png" %}' width="20" height="20">  
					</button>

					<button type="submit" id="deleteButton" onclick="delete_friend_request('{{ friend.username }}')">
						<img src='{% static "../static/icons/red_x_icon.jpg" %}' width="20" height="20">  
					</button>
				</li>
			{% endfor %}

			<h4>All friends</h4>
			{% for friend in friends %}
				<li>
					<img src="{{ friend.get_image_profile_url }}" class="rounded-circle" alt="profile picture" width="30" height="30">
					{{ friend.username }}
					{% if friend.is_online %} (online) {% endif %}
					<button type="submit" id="deleteButton" onclick="delete_friend('{{ friend.username }}')">
						<img src='{% static "../static/icons/red_x_icon.jpg" %}' width="20" height="20">  
					</button>
				</li>
			{% endfor %}
			

			<form action="/send_friend_request" method="post">
				{% csrf_token %}
				<input type="text" id="info" name="friend_to_add" placeholder="Add a friend" required><br><br>
				<button type="submit">Add</button>
			</form>
		</div>
		{% endif %}
		{% comment %}  {% endcomment %}



		<div class="content d-flex m-auto mh-100 mw-100" id="content">
			<img class="border content-body m-1 rounded w-100" id="content-body" src='{% static "../static/icons/placeholder.png" %}'>
		</div>
		<div aria-hidden="true" aria-labelledby="about" class="modal fade" id="about" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
				<div class="bg-body border modal-content p-1 rounded">
					<div class="modal-header p-1">
						<h2 class="m-1 pe-none">
							The Great Avocado War of '24
						</h2>
					</div>
					<div class="d-flex flex-column m-1 modal-body overflow-hidden p-0">
						<ul class="border-bottom-0 flex-nowrap ms-1 mt-1 nav nav-tabs position-relative rounded-top" id="myTab" role="tablist">
							<li class="nav-item" role="presentation">
								<button aria-controls="about-tab-pane" aria-selected="true" class="active border-bottom-0 first m-0 nav-link position-relative px-1 text-dark" data-bs-target="#about-tab-pane" data-bs-toggle="tab" id="about-tab" role="tab" type="button">
									About
								</button>
							</li>
							<li class="nav-item" role="presentation">
								<button aria-controls="components-tab-pane" aria-selected="false" class="border-bottom-0 m-0 nav-link position-relative px-1 rounded-0 text-dark" data-bs-target="#components-tab-pane" data-bs-toggle="tab" id="components-tab" role="tab" type="button">
									Components
								</button>
							</li>
							<li class="nav-item" role="presentation">
								<button aria-controls="authors-tab-pane" aria-selected="false" class="border-bottom-0 m-0 last nav-link position-relative px-1 text-dark" data-bs-target="#authors-tab-pane" data-bs-toggle="tab" id="authors-tab" role="tab" type="button">
									Authors
								</button>
							</li>
						</ul>
						<div class="d-flex overflow-hidden tab-content" id="myTabContent">
							<div aria-labelledby="about-tab" class="active border mb-1 mx-1 overflow-y-auto p-1 position-relative rounded show tab-pane" id="about-tab-pane" role="tabpanel" tabindex="0">
								<div class="d-flex">
									<img class="inline-img" src='{% static "../static/icons/openart-image_yBIl3nIg_1717776713014_raw.jpg" %}'>
								</div>
								<br>
								On February 30th 2024, something happened that would forever change the course of history. Tired of being treated as little more than food, the avocados waged war against the animal kingdom as a whole.
								<br>
								<br>
								At first, the war went well for the avocados and they made short work of the weak human forces. With the humans out of the picture, the avocados thought they had won the war.
								<br>
								<br>
								They were wrong.
								<br>
								<br>
								They were not prepared for the onslaught from the pangolins. The pangolins were ruthless. The avocados found themselves evenly matched.
								<br>
								<br>
								This website exists to serve as an accurate retelling of the Great Avocado War of '24. As for who won the war? You will have to play to find out.
							</div>
							<div aria-labelledby="components-tab" class="border mb-1 mx-1 overflow-y-auto p-1 position-relative rounded tab-pane w-100" id="components-tab-pane" role="tabpanel" tabindex="0">
								<b>
									Bootstrap
								</b>
								<br>
								<i>
									Version 5.3.3
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit component's homepage&#013;https://getbootstrap.com" type="button">
									<a href="https://getbootstrap.com" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									Django
								</b>
								<br>
								<i>
									Version 5.0.6
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit component's homepage&#013;https://www.djangoproject.com" type="button">
									<a href="https://www.djangoproject.com" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									PostgreSQL
								</b>
								<br>
								<i>
									Version 16.3
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit component's homepage&#013;https://www.postgresql.org" type="button">
									<a href="https://www.postgresql.org" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									Three.js
								</b>
								<br>
								<i>
									Version r165
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit component's homepage&#013;https://threejs.org" type="button">
									<a href="https://threejs.org" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
							</div>
							<div aria-labelledby="authors-tab" class="border mb-1 mx-1 overflow-y-auto p-1 position-relative rounded tab-pane w-100" id="authors-tab-pane" role="tabpanel" tabindex="0">
								<b>
									Bruno Pierre Bouchard
								</b>
								<br>
								<i>
									DJANGO
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit contributor's homepage&#013;https://github.com/Nyonyx" type="button">
									<a href="https://github.com/Nyonyx" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									Félix Barrette
								</b>
								<br>
								<i>
									Toute
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit contributor's homepage&#013;https://github.com/ShroomySquid" type="button">
									<a href="https://github.com/ShroomySquid" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									George Zhukov
								</b>
								<br>
								<i>
									Game
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit contributor's homepage&#013;https://github.com/joeroeg" type="button">
									<a href="https://github.com/joeroeg" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									Léopold Couturier-Otis
								</b>
								<br>
								<i>
									Interface
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit contributor's homepage&#013;https://github.com/lcouturi" type="button">
									<a href="https://github.com/lcouturi" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
								<b>
									Pierre Olivier Paquet
								</b>
								<br>
								<i>
									MIA
								</i>
								<br>
								<button class="border borderless-button d-flex m-1 p-0 rounded" title="Visit contributor's homepage&#013;https://github.com/pierreolivierpaquet" type="button">
									<a href="https://github.com/pierreolivierpaquet" target="_blank">
										<img class="icon m-1" height="22" src='{% static "../static/icons/globe.svg" %}'>
									</a>
								</button>
							</div>
						</div>
					</div>
					<div class="modal-footer p-1">
						<button class="border button d-flex m-1 ms-auto rounded shadow-sm" data-bs-dismiss="modal" type="button">
							<img class="icon m-1" height="22" src='{% static "../static/icons/window-close.svg" %}'>
							<div class="my-auto">
								Close
							</div>
						</button>
					</div>
				</div>
			</div>
		</div>

		{% comment %} Login form {% endcomment %}
		<div aria-hidden="true" aria-labelledby="login" class="modal fade" id="login" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="bg-body border modal-content p-1 rounded">
					<div class="modal-header p-1">
						<h2 class="m-1 pe-none">
							Log in
						</h2>
					</div>
					<form method="post" action="login_check">
						{% csrf_token %}
						<div class="m-1 modal-body p-0">
							<div class="border d-flex frame m-1 rounded">
								<div class="d-flex flex-column">
									<div class="my-auto pe-none text-end">
										Username:
									</div>
									<div class="my-auto pe-none text-end">
										Password:
									</div>
								</div>
								<div class="d-flex flex-column w-100">
									<input class="border m-1 p-1 rounded w-100" required type="text" name="username">
									<input class="border m-1 p-1 rounded w-100" required type="password" name="password">
								</div>
							</div>
						</div>
						<div class="modal-footer p-1">
							<button class="border button d-flex m-1 rounded shadow-sm text-nowrap" data-bs-target="#register" data-bs-toggle="modal" type="button">
								<img class="icon m-1" height="22" src='{% static "../static/icons/list-add-user.svg" %}'>
								<div class="my-auto pe-none">
									Register
								</div>
							</button>
							<button class="border button d-flex m-1 ms-auto rounded shadow-sm" data-bs-dismiss="modal" type="button">
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-cancel.svg" %}'>
								<div class="my-auto">
									Cancel
								</div>
							</button>
							<button class="border button d-flex m-1 rounded shadow-sm" type="submit" >
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-ok-apply.svg" %}'>
								<div class="my-auto">
									OK
								</div>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		{% comment %} {% endcomment %}
		{% comment %} Logout form {% endcomment %}
		<div aria-hidden="true" aria-labelledby="logout" class="modal fade" id="logout" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="bg-body border modal-content p-1 rounded">
					<div class="modal-header p-1">
						<h2 class="m-1 pe-none">
							Log out
						</h2>
					</div>
					<form method="get" action="{% url 'logout' %}">
						<div class="modal-footer p-1">
							<button class="border button d-flex m-1 ms-auto rounded shadow-sm" data-bs-dismiss="modal" type="button">
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-cancel.svg" %}'>
								<div class="my-auto">
									Cancel
								</div>
							</button>
							<button class="border button d-flex m-1 rounded shadow-sm" type="submit" >
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-ok-apply.svg" %}'>
								<div class="my-auto">
									OK
								</div>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		{% comment %} {% endcomment %}

		{% comment %} Registration form {% endcomment %}
		<div aria-hidden="true" aria-labelledby="register" class="modal fade" id="register" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="bg-body border modal-content p-1 rounded">
					<div class="modal-header p-1">
						<h2 class="m-1 pe-none">
							Register
						</h2>
					</div>
					<form method="post" action="register" id="myForm">
						{% csrf_token %}
						<div class="m-1 modal-body p-0">
							<p style="color:red;" id="error-message"> </p>
							<div class="border d-flex frame m-1 rounded">
								<div class="d-flex flex-column">
									<div class="my-auto pe-none text-end">
										Username:
									</div>
									<div class="my-auto pe-none text-end">
										Password:
									</div>
									<div class="my-auto pe-none text-end text-nowrap">
										Confirm password:
									</div>
								</div>
								<div class="d-flex flex-column w-100">
									<input class="border m-1 p-1 rounded w-100" required type="text" name="username">
									<input class="border m-1 p-1 rounded w-100" required type="password" name="password">
									<input class="border m-1 p-1 rounded w-100" required type="password" name="confirm_password">
								</div>
							</div>
						</div>
						<div class="modal-footer p-1">
							<button class="border button d-flex m-1 ms-auto rounded shadow-sm" data-bs-target="#login" data-bs-toggle="modal" type="button">
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-cancel.svg" %}'>
								<div class="my-auto">
									Cancel
								</div>
							</button>
							<button class="border button d-flex m-1 rounded shadow-sm" type="submit">
								<img class="icon m-1" height="22" src='{% static "../static/icons/dialog-ok-apply.svg" %}'>
								<div class="my-auto">
									OK
								</div>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		{% comment %} {% endcomment %}
		<div aria-hidden="true" aria-labelledby="tournament" class="modal fade" id="tournament" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="bg-body border modal-content p-1 rounded">
					<div class="modal-header p-1">
						<h2 class="m-1 pe-none">
							Tournament
						</h2>
					</div>
					<div class="m-1 modal-body p-0">
						<div class="border frame m-1 rounded">
							<div class="d-flex w-100">
								<input  class="border m-1 p-1 rounded w-100" placeholder="Enter username" id="list_item" type="text"/>
								<button class="border button d-flex m-1 rounded shadow-sm" id="list_add">
									<img class="icon m-1" height="22" src='{% static "../static/icons/list-add.svg" %}'>
								</button>
							</div>
							<div class="list_container">
								<div id="list">
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer p-1">
						<button class="border button d-flex m-1 ms-auto rounded shadow-sm" type="button">
							<img class="icon m-1" height="22" src='{% static "../static/icons/media-playback-start.svg" %}'>
							<div class="my-auto">
								Start tournament
							</div>
						</button>
						<button class="border button d-flex m-1 rounded shadow-sm" data-bs-dismiss="modal" type="button">
							<img class="icon m-1" height="22" src='{% static "../static/icons/window-close.svg" %}'>
							<div class="my-auto">
								Close
							</div>
						</button>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src='{% static "../static/ft_transcendence.js" %}'>
	</script>


	<script>
		// Ajax Registration form
		document.getElementById('myForm').addEventListener('submit', function(event) {
			event.preventDefault(); // Empêcher la soumission normale du formulaire
			// Récupérer les données du formulaire
			var formData = new FormData(this);
			// Envoyer les données via Ajax
			fetch("{% url 'register' %}", {
				method: 'POST',
				body: formData,
				headers: {
					'X-Requested-With': 'XMLHttpRequest',
					'X-CSRFToken': '{% csrf_token %}'
				}
			})
			.then(response => response.json())
			.then(data => {
				if (data.error) {
					document.getElementById('error-message').textContent = data.error;
				} else {
					// Si aucune erreur, faire quelque chose (comme rediriger ou afficher un message de succès)
					// // Exemple de redirection
					window.location.href = "{% url 'accueil' %}";
					console.log(" cest bon ");
				}
			})
			.catch(error => {
				console.error('Error:', error);
			});
		});



		function delete_friend(friend) {
            var url = `/delete_friend`; 
            fetch(url, {
                method: 'DELETE',
				headers: {
					'X-CSRFToken': getCookie('csrftoken')
				},
				body: JSON.stringify( { friend_to_delete: friend })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erreur lors de la suppression de l\'élément');
                }
				window.location.href = "{% url 'accueil' %}";
                console.log('Élément supprimé avec succès');
            })
            .catch(error => {
                console.error('Erreur :', error);
            });
        }

		function delete_friend_request(friend) {
            var url = `/delete_friend_request`; 
            fetch(url, {
                method: 'DELETE',
				headers: {
					'X-CSRFToken': getCookie('csrftoken')
				},
				body: JSON.stringify( { friend_to_delete: friend })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erreur lors de la suppression de l\'élément');
                }
				window.location.href = "{% url 'accueil' %}";
                console.log('Élément supprimé avec succès');
            })
            .catch(error => {
                console.error('Erreur :', error);
            });
        }

		function accept_friend_request(friend) {
            var url = `/add_friend`; 
            fetch(url, {
                method: 'POST',
				headers: {
					'Content-Type': 'application/json',
					'X-CSRFToken': getCookie('csrftoken')
				},
				body: JSON.stringify( { friend_to_add: friend })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erreur lors de la suppression de l\'élément');
                }
				window.location.href = "{% url 'accueil' %}";
                console.log('Élément supprimé avec succès');
            })
            .catch(error => {
                console.error('Erreur :', error);
            });
        }

		function getCookie(name) {
			var cookieValue = null;
			if (document.cookie && document.cookie !== '') {
				var cookies = document.cookie.split(';');
				for (var i = 0; i < cookies.length; i++) {
					var cookie = cookies[i].trim();
					// Trouve le cookie avec le nom spécifié
					if (cookie.substring(0, name.length + 1) === (name + '=')) {
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
						break;
					}
				}
			}
			return cookieValue;
		}

	</script>
</html>
